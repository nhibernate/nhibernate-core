
Installation steps for Firebird for NH TeamCity:

1.  Download Firebird (Firebird-3.0.2.32703_0_x64):  https://www.firebirdsql.org/en/server-packages/;
2.  Run the installer AS ADMINISTRATOR... Use the default firebird password when prompted: masterkey.
3.  Leave other settings with their defaults.
4.  The setup should install Firebird on the machine;
5.  Go into Firebird folder (c:\program files\firebird\) and create a folder named Data;
6.  Go in Firebird installation directory and open databases.conf;
7.  Add in "Live Databases" section:
nhibernate = C:\Program Files\Firebird\Data\nhibernate.fdb
8.  Open firebird.conf;
9.  Ensure AuthClient, AuthServer and UserManager are set to Srp only:
AuthServer = Srp
AuthClient = Srp
UserManager = Srp
10. Ensure WireCrypt is set to Enabled.
WireCrypt = Enabled
11. Restart Firebird service.

The TestDatabaseSetup will create the database on the Teamcity agent.
For manual testing, take care of not creating it with inadequate acl on the file. This may happen
if you use ISQL with a connection string causing it to create it in embedded mode, without actually
using the server. Prefixing your path with "localhost:" should avoid that.

For tests performances, and since it is just an expandable test database, better disable forced writes.
Since those tests drop/create schema constantly, they are quite heavy on writes and this single setting
can have a six fold impact on their duration. For changing it, do:
a.  Stop Firebird service.
b.  From Firebird installation folder, run:
gfix -w async nhibernate -user SYSDBA
c.  Restart Firebird service.